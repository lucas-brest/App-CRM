@page "/"
@using Services;
@inject IServicioService ServicioService;
@inject ContratoService ContratoService;
@inject ClienteService ClienteService;

<PageTitle>Home</PageTitle>

<h1>Bienvenido!</h1>

<AuthorizeView>
    <Authorized>
        <h2>Hola @context.User.Identity.Name!</h2>
    </Authorized>
    <NotAuthorized>
        <h2>No autorizado</h2>
    </NotAuthorized>
</AuthorizeView>

<div class="box-section">
    <a href="/servicios">
        <div class="box" style="background-color:rgba(29, 42, 208, 0.8)">
            <span>
                Servicios disponibles
            </span>
            <span class="number">
                @CantServicios
            </span>
        </div>
    </a>
    <a href="/clientes">
        <div class="box" style="background-color:rgba(190, 53, 10, 0.8)">
            <span>
                Clientes registrados
            </span>
            <span class="number">
                @CantClientes
            </span>
        </div>
    </a>
    <a href="/contratos">
        <div class="box" style="background-color:rgba(8, 165, 52, 0.8)">
            <span>
                Contrataciones de servicio
            </span>
            <span class="number">
                @CantContratos
            </span>
        </div>
    </a>
</div>

@code {
    [CascadingParameter]
    private Task<AuthenticationState> authenticationState { get; set; }

    private int CantServicios;
    private int CantClientes;
    private int CantContratos;

    protected override async Task OnInitializedAsync()
    {
        CantClientes = ClienteService.GetCliente().Count();
        CantServicios = ServicioService.GetServicios().Count();
        CantContratos = ContratoService.GetContrato().Count();
    }
}